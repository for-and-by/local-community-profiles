{
  "version": 3,
  "sources": ["../../../app/components/molecules/markers/base.tsx"],
  "sourcesContent": ["import type { ReactNode } from \"react\";\nimport { useEffect, useState } from \"react\";\n\nimport type { Listener, LngLatLike, MarkerOptions } from \"maplibre-gl\";\nimport { Marker } from \"maplibre-gl\";\n\nimport { createPortal } from \"react-dom\";\n\nimport { useMap } from \"~/hooks/map/use-map\";\n\ninterface Props extends MarkerOptions {\n  coordinates: LngLatLike;\n  children?: ReactNode;\n  onDragEnd?: Listener;\n  onDragStart?: Listener;\n}\n\nexport default function BaseMarker({\n  coordinates,\n  children,\n  onDragEnd = () => {},\n  onDragStart = () => {},\n  ...props\n}: Props) {\n  const [marker, setMarker] = useState<Marker | null>(null);\n  const { map } = useMap();\n\n  useEffect(() => {\n    if (!marker) {\n      setMarker(\n        new Marker({\n          element: document.createElement(\"div\"),\n          ...props,\n        })\n      );\n    }\n    //\teslint-disable-next-line react-hooks/exhaustive-deps\n  }, [marker]);\n\n  useEffect(() => {\n    if (!!marker && !!map) {\n      marker\n        .setLngLat(coordinates)\n        .addTo(map)\n        .on(\"dragstart\", onDragStart)\n        .on(\"dragend\", onDragEnd);\n    }\n    //\teslint-disable-next-line react-hooks/exhaustive-deps\n  }, [marker, map]);\n\n  useEffect(() => {\n    if (marker) {\n      marker.setLngLat(coordinates);\n    }\n  }, [marker, coordinates]);\n\n  if (!marker) return null;\n\n  return createPortal(children, marker.getElement());\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;AACA,mBAAoC;AAGpC,yBAAuB;AAEvB,uBAA6B;AAWd,SAAR,WAA4B;AAAA,EACjC;AAAA,EACA;AAAA,EACA,YAAY,MAAM;AAAA,EAAC;AAAA,EACnB,cAAc,MAAM;AAAA,EAAC;AAAA,KAClB;AACL,GAAU;AACR,QAAM,CAAC,QAAQ,SAAS,QAAI,uBAAwB,IAAI;AACxD,QAAM,EAAE,IAAI,IAAI,OAAO;AAEvB,8BAAU,MAAM;AACd,QAAI,CAAC,QAAQ;AACX;AAAA,QACE,IAAI,0BAAO;AAAA,UACT,SAAS,SAAS,cAAc,KAAK;AAAA,UACrC,GAAG;AAAA,QACL,CAAC;AAAA,MACH;AAAA,IACF;AAAA,EAEF,GAAG,CAAC,MAAM,CAAC;AAEX,8BAAU,MAAM;AACd,QAAI,CAAC,CAAC,UAAU,CAAC,CAAC,KAAK;AACrB,aACG,UAAU,WAAW,EACrB,MAAM,GAAG,EACT,GAAG,aAAa,WAAW,EAC3B,GAAG,WAAW,SAAS;AAAA,IAC5B;AAAA,EAEF,GAAG,CAAC,QAAQ,GAAG,CAAC;AAEhB,8BAAU,MAAM;AACd,QAAI,QAAQ;AACV,aAAO,UAAU,WAAW;AAAA,IAC9B;AAAA,EACF,GAAG,CAAC,QAAQ,WAAW,CAAC;AAExB,MAAI,CAAC;AAAQ,WAAO;AAEpB,aAAO,+BAAa,UAAU,OAAO,WAAW,CAAC;AACnD;",
  "names": []
}
