{
  "version": 3,
  "sources": ["../../../../app/routes/create/location.tsx", "../../../../app/components/inputs/map-center.tsx", "../../../../app/hooks/use-search.ts", "../../../../app/components/fields/location-field.tsx"],
  "sourcesContent": ["import { useEffect } from \"react\";\nimport { useNavigate } from \"@remix-run/react\";\n\nimport { useCreateOutlet } from \"~/routes/create\";\nimport { useMapLock } from \"~/hooks/map/use-map-lock\";\n\nimport { Warning } from \"~/components/composites/warning\";\nimport LocationField from \"~/components/fields/location-field\";\nimport Footer from \"~/components/regions/footer\";\nimport { useFormContext } from \"react-hook-form\";\n\nexport default function CreateLocation() {\n  const [, { setUnlock }] = useMapLock();\n  const { setStage, showWarning } = useCreateOutlet();\n  const navigate = useNavigate();\n  const { trigger } = useFormContext();\n\n  const handleNext = () => {\n    trigger().then((result) => {\n      if (result) {\n        navigate(\"/create/details\");\n      }\n    });\n  };\n\n  useEffect(() => {\n    setUnlock();\n    setStage({\n      heading: \"Set Address\",\n      step: 1,\n      progress: 20,\n    });\n    //  eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  return (\n    <Footer>\n      <div className=\"divider-gray-200 flex flex-col divide-y bg-white\">\n        <div className=\"p-3\">\n          <p className=\"text-base\">\n            Use the pin or drag the map to where the reports is referring to.\n          </p>\n        </div>\n        <div className=\"space-y-2 p-2\">\n          <LocationField />\n        </div>\n        <div className=\"flex flex-row justify-between p-2\">\n          <Warning.Trigger className=\"btn btn-light\" onShow={showWarning}>\n            <p className=\"btn-text\">Cancel</p>\n          </Warning.Trigger>\n          <button onClick={handleNext} className=\"btn btn-light\">\n            <p className=\"btn-text\">Add Details</p>\n            <i className=\"btn-icon icon icon-arrow-right\" />\n          </button>\n        </div>\n      </div>\n    </Footer>\n  );\n}\n", "import { useEffect } from \"react\";\nimport type { LngLatLike } from \"maplibre-gl\";\n\nimport { parseLngLat } from \"~/lib/maplibre\";\n\nimport useSearch from \"~/hooks/use-search\";\nimport { useMapCenter } from \"~/hooks/map/use-map-center\";\n\nimport { FindSelfButton } from \"~/components/atoms/find-self-button\";\n\ninterface Props {\n  onCenterChange?: (center: LngLatLike) => void;\n  onAddressChange?: (address: string) => void;\n}\n\nexport default function MapCenterInput({\n  onCenterChange,\n  onAddressChange,\n}: Props) {\n  const [center] = useMapCenter();\n  const { state, data } = useSearch(center);\n\n  useEffect(() => {\n    if (onCenterChange) onCenterChange(parseLngLat(center));\n    //   eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [center]);\n\n  useEffect(() => {\n    if (onAddressChange && data?.results?.[0]?.heading)\n      onAddressChange(data?.results[0].heading);\n    //   eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [data]);\n\n  return (\n    <div className=\"flex w-full flex-row items-center space-x-4 rounded bg-gray-100 p-3\">\n      <div className=\"space-y flex flex-grow flex-col\">\n        <p className=\"text-gray-400\">Approximate Address</p>\n        <p className=\"text-gray-900\">\n          {!(state === \"submitting\") &&\n          !!data?.results &&\n          data.results?.length > 0\n            ? data?.results?.[0].heading\n            : \"Searching for address...\"}\n        </p>\n      </div>\n      {state !== \"submitting\" ? null : (\n        <i className=\"icon icon-circle-anim icon-is-spinning before:text-black\" />\n      )}\n      <FindSelfButton />\n    </div>\n  );\n}\n", "import { useEffect } from \"react\";\nimport type { SubmitOptions } from \"@remix-run/react\";\nimport { useFetcher } from \"@remix-run/react\";\n\nimport type { geocode } from \"~/lib/maplibre\";\nimport { parseLngLat } from \"~/lib/maplibre\";\n\nexport default function useSearch(query: Parameters<typeof geocode>[0]) {\n  const fetcher = useFetcher();\n\n  useEffect(() => {\n    const options: SubmitOptions = { action: \"/search\", method: \"post\" };\n    if (!query) return () => {};\n    if (typeof query === \"string\") {\n      fetcher.submit({ query }, options);\n    } else {\n      const [lng, lat] = parseLngLat(query);\n      fetcher.submit({ lng: lng.toString(), lat: lat.toString() }, options);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [query]);\n\n  return fetcher;\n}\n", "import React from \"react\";\nimport { useController, useFormContext } from \"react-hook-form\";\n\nimport MapCenterInput from \"~/components/inputs/map-center\";\n\nexport default function LocationField() {\n  const { control } = useFormContext();\n\n  const { field: coordinatesField } = useController({\n    name: \"location.coordinates\",\n    control,\n    rules: {\n      required: true,\n    },\n  });\n\n  const { field: addressField } = useController({\n    name: \"location.address\",\n    control,\n    rules: {\n      required: true,\n    },\n  });\n\n  return (\n    <MapCenterInput\n      onCenterChange={coordinatesField.onChange}\n      onAddressChange={addressField.onChange}\n    />\n  );\n}\n"],
  "mappings": "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",
  "names": ["import_react", "import_react", "_a", "_b", "import_jsx_dev_runtime", "import_jsx_dev_runtime"]
}
