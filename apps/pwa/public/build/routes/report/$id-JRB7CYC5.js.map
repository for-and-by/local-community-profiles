{
  "version": 3,
  "sources": ["../../../../app/routes/report/$id.tsx", "../../../../app/components/molecules/markers/report.tsx"],
  "sourcesContent": ["import { useEffect } from \"react\";\nimport type { LoaderFunction, MetaFunction } from \"@remix-run/node\";\nimport { json, redirect } from \"@remix-run/node\";\nimport { Link, Outlet, useLoaderData } from \"@remix-run/react\";\n\nimport { formatMetadata } from \"~/utils/seo\";\n\nimport { useReportOpen } from \"~/hooks/reports/use-report-open\";\nimport { useMapLock } from \"~/hooks/map/use-map-lock\";\nimport { useMapCenter } from \"~/hooks/map/use-map-center\";\n\nimport ReportMarker from \"~/components/molecules/markers/report\";\nimport Header from \"~/components/regions/header\";\n\nexport const meta: MetaFunction = ({ data }) => {\n  return formatMetadata({\n    title: `${data.report.type.title} Report #${data.report.id}`,\n    description: data.report.content.details,\n    image: data.report.content.image_url,\n  });\n};\n\nexport const loader: LoaderFunction = async ({ params, context }) => {\n  if (!params.id) return redirect(\"/\");\n  const supabase = context.getSupabase();\n\n  const select = `\n    *,\n    type:type_handle(\n      *\n    ),\n    content:content_id(\n      *,\n      severity:severity_handle(\n        *\n      )\n    )\n  `;\n\n  const report = await supabase\n    .from(\"reports\")\n    .select(select)\n    .eq(\"id\", params.id)\n    .limit(1)\n    .single();\n\n  if (report.error) throw report.error;\n  if (!report.data) return redirect(\"/\");\n\n  return json({ report: report.data });\n};\n\nexport default function Report() {\n  const loader = useLoaderData();\n  const data = loader?.report;\n\n  const [, open] = useReportOpen();\n  const [isLocked, { setLock }] = useMapLock();\n  const [, setCenter] = useMapCenter();\n\n  useEffect(() => {\n    if (!isLocked) setLock();\n    open(data.content_id);\n    setCenter(data);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  return (\n    <>\n      <ReportMarker coordinates={data} />\n      <Header>\n        <div className=\"flex flex-col divide-y divide-gray-100\">\n          <div className=\"flex flex-row items-center bg-white p-2\">\n            <Link to=\"/\" className=\"btn btn-light\">\n              <i className=\"btn-icon icon icon-arrow-left\" />\n            </Link>\n            <div className=\"flex flex-col px-3\">\n              <h3 className=\"font-medium\">Report Details</h3>\n              <p className=\"text-sm text-base-400\">\n                Details for Report #{data.id}\n              </p>\n            </div>\n          </div>\n        </div>\n      </Header>\n      <Outlet />\n    </>\n  );\n}\n", "import React from \"react\";\nimport BaseMarker from \"~/components/molecules/markers/base\";\nimport type { LngLatLike } from \"maplibre-gl\";\n\ninterface Props {\n  coordinates: LngLatLike;\n}\n\nexport default function ReportMarker({ coordinates }: Props) {\n  if (!coordinates) return null;\n\n  return (\n    <BaseMarker\n      coordinates={coordinates}\n      anchor=\"bottom-right\"\n      offset={[0, -16]}\n    >\n      <div className=\"relative flex h-8 w-8 origin-bottom-right rotate-45 items-center justify-center rounded-full rounded-br-none bg-emerald-900 text-white transition-all\">\n        <i className=\"icon icon-sm icon-circle -rotate-45\" />\n      </div>\n    </BaseMarker>\n  );\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,mBAA0B;;;ACkBlB;AAVO,SAAR,aAA8B,EAAE,YAAY,GAAU;AAC3D,MAAI,CAAC;AAAa,WAAO;AAEzB,SACE;AAAA,IAAC;AAAA;AAAA,MACC;AAAA,MACA,QAAO;AAAA,MACP,QAAQ,CAAC,GAAG,GAAG;AAAA,MAEf,6DAAC,SAAI,WAAU,yJACb,6DAAC,OAAE,WAAU,yCAAb;AAAA;AAAA;AAAA;AAAA,aAAmD,KADrD;AAAA;AAAA;AAAA;AAAA,aAEA;AAAA;AAAA,IAPF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQA;AAEJ;;;AD8CI,IAAAA,0BAAA;AAtDG,IAAM,OAAqB,CAAC,EAAE,KAAK,MAAM;AAC9C,SAAO,eAAe;AAAA,IACpB,OAAO,GAAG,KAAK,OAAO,KAAK,iBAAiB,KAAK,OAAO;AAAA,IACxD,aAAa,KAAK,OAAO,QAAQ;AAAA,IACjC,OAAO,KAAK,OAAO,QAAQ;AAAA,EAC7B,CAAC;AACH;AAgCe,SAAR,SAA0B;AAC/B,QAAM,SAAS,cAAc;AAC7B,QAAM,OAAO,iCAAQ;AAErB,QAAM,CAAC,EAAE,IAAI,IAAI,cAAc;AAC/B,QAAM,CAAC,UAAU,EAAE,QAAQ,CAAC,IAAI,WAAW;AAC3C,QAAM,CAAC,EAAE,SAAS,IAAI,aAAa;AAEnC,8BAAU,MAAM;AACd,QAAI,CAAC;AAAU,cAAQ;AACvB,SAAK,KAAK,UAAU;AACpB,cAAU,IAAI;AAAA,EAEhB,GAAG,CAAC,CAAC;AAEL,SACE,wFACE;AAAA,wDAAC,gBAAa,aAAa,QAA3B;AAAA;AAAA;AAAA;AAAA,WAAiC;AAAA,IACjC,oDAAC,kBACC,8DAAC,SAAI,WAAU,0CACb,8DAAC,SAAI,WAAU,2CACb;AAAA,0DAAC,QAAK,IAAG,KAAI,WAAU,iBACrB,8DAAC,OAAE,WAAU,mCAAb;AAAA;AAAA;AAAA;AAAA,aAA6C,KAD/C;AAAA;AAAA;AAAA;AAAA,aAEA;AAAA,MACA,oDAAC,SAAI,WAAU,sBACb;AAAA,4DAAC,QAAG,WAAU,eAAc,8BAA5B;AAAA;AAAA;AAAA;AAAA,eAA0C;AAAA,QAC1C,oDAAC,OAAE,WAAU,yBAAwB;AAAA;AAAA,UACd,KAAK;AAAA,aAD5B;AAAA;AAAA;AAAA;AAAA,eAEA;AAAA,WAJF;AAAA;AAAA;AAAA;AAAA,aAKA;AAAA,SATF;AAAA;AAAA;AAAA;AAAA,WAUA,KAXF;AAAA;AAAA;AAAA;AAAA,WAYA,KAbF;AAAA;AAAA;AAAA;AAAA,WAcA;AAAA,IACA,oDAAC,YAAD;AAAA;AAAA;AAAA;AAAA,WAAQ;AAAA,OAjBV;AAAA;AAAA;AAAA;AAAA,SAkBA;AAEJ;",
  "names": ["import_jsx_dev_runtime"]
}
