{
  "version": 3,
  "sources": ["../../../../../app/components/molecules/image-collapse.tsx", "../../../../../app/components/molecules/verify-report.tsx", "../../../../../app/routes/report/$id/index.tsx"],
  "sourcesContent": ["import React, { useState } from \"react\";\nimport { parseImageUrl } from \"~/lib/image\";\n\ninterface Props {\n  src: string;\n}\n\nexport function ImageCollapse({ src }: Props) {\n  const [isExpanded, setIsExpanded] = useState(false);\n\n  const handleToggle = () => {\n    setIsExpanded((prev) => !prev);\n  };\n\n  return (\n    <div\n      data-expanded={isExpanded}\n      className=\"group/image-collapse relative h-36 overflow-hidden transition-all data-expanded:h-96\"\n    >\n      <button\n        className=\"btn btn-white absolute bottom-2 right-2 z-20\"\n        onClick={handleToggle}\n      >\n        <i\n          className={`btn-icon icon ${isExpanded ? \"icon-minus\" : \"icon-plus\"}`}\n        />\n      </button>\n      <img\n        src={parseImageUrl(src)}\n        alt={`Report Thumbnail`}\n        className=\"h-full w-full object-cover\"\n      />\n    </div>\n  );\n}\n", "import { Warning, useWarning } from \"~/components/composites/warning\";\n\ntype Props = {\n  onVerify: () => void;\n};\n\nexport function VerifyReport(props: Props) {\n  const { onVerify } = props;\n\n  const [isShow, { showWarning, hideWarning, confirmWarning }] =\n    useWarning(onVerify);\n\n  return (\n    <div className=\"flex flex-row items-center justify-between rounded bg-gray-900 p-3\">\n      <p className=\"font-medium text-white\">This report is getting old.</p>\n      <Warning.Trigger onShow={showWarning} className=\"text-brand-400\">\n        <p className=\"btn-text\">Verify</p>\n      </Warning.Trigger>\n      <Warning.Panel\n        heading=\"Verify Report\"\n        body=\"This report is getting close to it's expiry date. If you know that this report is still relevant, please either verify this report here, or update the information.\"\n        isShow={isShow}\n        onHide={hideWarning}\n        onConfirm={confirmWarning}\n      />\n    </div>\n  );\n}\n", "import { Link, useFetcher, useRouteLoaderData } from \"@remix-run/react\";\n\nimport type { ReportFull } from \"@safer-streets/db\";\n\nimport {\n  getMetadataFromContent,\n  parseDateAsString,\n} from \"@safer-streets/utils\";\n\nimport Footer from \"~/components/regions/footer\";\nimport Toast from \"~/components/regions/toast\";\n\nimport { Warning, useWarning } from \"~/components/composites/warning\";\nimport { ImageCollapse } from \"~/components/molecules/image-collapse\";\n\nimport Body from \"~/components/regions/body\";\nimport { VerifyReport } from \"~/components/molecules/verify-report\";\n\nexport default function Details() {\n  const verifyReport = useFetcher();\n  const deleteReport = useFetcher();\n\n  const loader = useRouteLoaderData(\"routes/report/$id\");\n  const data = (loader as any).report as ReportFull;\n  const { verifyDate } = getMetadataFromContent(data.content, data.type);\n\n  const handleDelete = () => {\n    deleteReport.submit(null, {\n      action: `/report/${data.id}/delete`,\n      method: \"delete\",\n    });\n  };\n\n  const handleVerify = () => {\n    verifyReport.submit(null, {\n      action: `/report/${data.id}/verify`,\n      method: \"patch\",\n    });\n  };\n\n  const [isShow, { showWarning, hideWarning, confirmWarning }] =\n    useWarning(handleDelete);\n\n  if (!data) return null;\n\n  return (\n    <>\n      <Toast\n        content=\"Deleting report...\"\n        show={deleteReport.state === \"submitting\"}\n      />\n      <Toast\n        content=\"Verifying report...\"\n        show={verifyReport.state === \"submitting\"}\n      />\n      <Body>\n        {verifyDate && verifyDate.valueOf() < Date.now() ? (\n          <VerifyReport onVerify={handleVerify} />\n        ) : null}\n      </Body>\n      <Footer>\n        <div className=\"max-h-[40vh] divide-y divide-gray-200 overflow-y-scroll\">\n          {data.content.image_url ? (\n            <ImageCollapse src={data.content.image_url} />\n          ) : null}\n          <div className=\"flex flex-row items-center space-x-2 bg-white p-2\">\n            {verifyDate && verifyDate.valueOf() < Date.now() ? (\n              <p className=\"my-1 rounded bg-gray-800 px-1 text-sm text-white\">\n                Needs Verifying\n              </p>\n            ) : null}\n            <p className=\"my-1 rounded bg-gray-100 px-1 text-sm text-gray-700\">\n              {data.content.severity.title}\n            </p>\n          </div>\n          <div className=\"p-3\">\n            <p className=\"font-medium\">Details</p>\n            <p>{data.content.details}</p>\n          </div>\n          <div className=\"flex flex-col p-3\">\n            <div className=\"flex flex-row justify-between\">\n              <p className=\"text-gray-400\">Last Updated</p>\n              <p>{parseDateAsString(data.updated_at)}</p>\n            </div>\n            <div className=\"flex flex-row justify-between\">\n              <p className=\"text-gray-400\">Created On</p>\n              <p>{parseDateAsString(data.created_at)}</p>\n            </div>\n            <div className=\"flex flex-row justify-between\">\n              <p className=\"text-gray-400\">Verified On</p>\n              <p>{parseDateAsString(data.content.verified_at)}</p>\n            </div>\n          </div>\n          <div className=\"flex flex-col p-3\">\n            <div className=\"flex flex-row justify-between\">\n              <p className=\"text-gray-400\">Report ID</p>\n              <p>{data.id}</p>\n            </div>\n            <div className=\"flex flex-row justify-between\">\n              <p className=\"text-gray-400\">Content ID</p>\n              <p>{data.content_id}</p>\n            </div>\n          </div>\n\n          <div className=\"sticky bottom-0 flex justify-between bg-white p-2 shadow-md\">\n            <Link to={`/report/${data.id}/edit`} className=\"btn btn-primary\">\n              <p className=\"btn-text\">Edit Report</p>\n            </Link>\n            <Warning.Trigger className=\"btn btn-light\" onShow={showWarning}>\n              <p className=\"btn-text\">Delete</p>\n            </Warning.Trigger>\n          </div>\n        </div>\n      </Footer>\n      <Warning.Panel\n        heading=\"Delete Report\"\n        body=\"Are you sure you want to delete this report? You won't be able to recover it without contacting admin.\"\n        isShow={isShow}\n        onConfirm={confirmWarning}\n        onHide={hideWarning}\n      />\n    </>\n  );\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,mBAAgC;AAuBxB;AAhBD,SAAS,cAAc,EAAE,IAAI,GAAU;AAC5C,QAAM,CAAC,YAAY,aAAa,QAAI,uBAAS,KAAK;AAElD,QAAM,eAAe,MAAM;AACzB,kBAAc,CAAC,SAAS,CAAC,IAAI;AAAA,EAC/B;AAEA,SACE;AAAA,IAAC;AAAA;AAAA,MACC,iBAAe;AAAA,MACf,WAAU;AAAA,MAEV;AAAA;AAAA,UAAC;AAAA;AAAA,YACC,WAAU;AAAA,YACV,SAAS;AAAA,YAET;AAAA,cAAC;AAAA;AAAA,gBACC,WAAW,iBAAiB,aAAa,eAAe;AAAA;AAAA,cAD1D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAEA;AAAA;AAAA,UANF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAOA;AAAA,QACA;AAAA,UAAC;AAAA;AAAA,YACC,KAAK,cAAc,GAAG;AAAA,YACtB,KAAK;AAAA,YACL,WAAU;AAAA;AAAA,UAHZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAIA;AAAA;AAAA;AAAA,IAhBF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAiBA;AAEJ;;;ACpBM,IAAAA,0BAAA;AARC,SAAS,aAAa,OAAc;AACzC,QAAM,EAAE,SAAS,IAAI;AAErB,QAAM,CAAC,QAAQ,EAAE,aAAa,aAAa,eAAe,CAAC,IACzD,WAAW,QAAQ;AAErB,SACE,oDAAC,SAAI,WAAU,sEACb;AAAA,wDAAC,OAAE,WAAU,0BAAyB,2CAAtC;AAAA;AAAA;AAAA;AAAA,WAAiE;AAAA,IACjE,oDAAC,QAAQ,SAAR,EAAgB,QAAQ,aAAa,WAAU,kBAC9C,8DAAC,OAAE,WAAU,YAAW,sBAAxB;AAAA;AAAA;AAAA;AAAA,WAA8B,KADhC;AAAA;AAAA;AAAA;AAAA,WAEA;AAAA,IACA;AAAA,MAAC,QAAQ;AAAA,MAAR;AAAA,QACC,SAAQ;AAAA,QACR,MAAK;AAAA,QACL;AAAA,QACA,QAAQ;AAAA,QACR,WAAW;AAAA;AAAA,MALb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAMA;AAAA,OAXF;AAAA;AAAA;AAAA;AAAA,SAYA;AAEJ;;;ACmBI,IAAAC,0BAAA;AA5BW,SAAR,UAA2B;AAChC,QAAM,eAAe,WAAW;AAChC,QAAM,eAAe,WAAW;AAEhC,QAAM,SAAS,mBAAmB,mBAAmB;AACrD,QAAM,OAAQ,OAAe;AAC7B,QAAM,EAAE,WAAW,IAAI,uBAAuB,KAAK,SAAS,KAAK,IAAI;AAErE,QAAM,eAAe,MAAM;AACzB,iBAAa,OAAO,MAAM;AAAA,MACxB,QAAQ,WAAW,KAAK;AAAA,MACxB,QAAQ;AAAA,IACV,CAAC;AAAA,EACH;AAEA,QAAM,eAAe,MAAM;AACzB,iBAAa,OAAO,MAAM;AAAA,MACxB,QAAQ,WAAW,KAAK;AAAA,MACxB,QAAQ;AAAA,IACV,CAAC;AAAA,EACH;AAEA,QAAM,CAAC,QAAQ,EAAE,aAAa,aAAa,eAAe,CAAC,IACzD,WAAW,YAAY;AAEzB,MAAI,CAAC;AAAM,WAAO;AAElB,SACE,wFACE;AAAA;AAAA,MAAC;AAAA;AAAA,QACC,SAAQ;AAAA,QACR,MAAM,aAAa,UAAU;AAAA;AAAA,MAF/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAGA;AAAA,IACA;AAAA,MAAC;AAAA;AAAA,QACC,SAAQ;AAAA,QACR,MAAM,aAAa,UAAU;AAAA;AAAA,MAF/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAGA;AAAA,IACA,oDAAC,gBACE,wBAAc,WAAW,QAAQ,IAAI,KAAK,IAAI,IAC7C,oDAAC,gBAAa,UAAU,gBAAxB;AAAA;AAAA;AAAA;AAAA,WAAsC,IACpC,QAHN;AAAA;AAAA;AAAA;AAAA,WAIA;AAAA,IACA,oDAAC,kBACC,8DAAC,SAAI,WAAU,2DACZ;AAAA,WAAK,QAAQ,YACZ,oDAAC,iBAAc,KAAK,KAAK,QAAQ,aAAjC;AAAA;AAAA;AAAA;AAAA,aAA4C,IAC1C;AAAA,MACJ,oDAAC,SAAI,WAAU,qDACZ;AAAA,sBAAc,WAAW,QAAQ,IAAI,KAAK,IAAI,IAC7C,oDAAC,OAAE,WAAU,oDAAmD,+BAAhE;AAAA;AAAA;AAAA;AAAA,eAEA,IACE;AAAA,QACJ,oDAAC,OAAE,WAAU,uDACV,eAAK,QAAQ,SAAS,SADzB;AAAA;AAAA;AAAA;AAAA,eAEA;AAAA,WARF;AAAA;AAAA;AAAA;AAAA,aASA;AAAA,MACA,oDAAC,SAAI,WAAU,OACb;AAAA,4DAAC,OAAE,WAAU,eAAc,uBAA3B;AAAA;AAAA;AAAA;AAAA,eAAkC;AAAA,QAClC,oDAAC,OAAG,eAAK,QAAQ,WAAjB;AAAA;AAAA;AAAA;AAAA,eAAyB;AAAA,WAF3B;AAAA;AAAA;AAAA;AAAA,aAGA;AAAA,MACA,oDAAC,SAAI,WAAU,qBACb;AAAA,4DAAC,SAAI,WAAU,iCACb;AAAA,8DAAC,OAAE,WAAU,iBAAgB,4BAA7B;AAAA;AAAA;AAAA;AAAA,iBAAyC;AAAA,UACzC,oDAAC,OAAG,4BAAkB,KAAK,UAAU,KAArC;AAAA;AAAA;AAAA;AAAA,iBAAuC;AAAA,aAFzC;AAAA;AAAA;AAAA;AAAA,eAGA;AAAA,QACA,oDAAC,SAAI,WAAU,iCACb;AAAA,8DAAC,OAAE,WAAU,iBAAgB,0BAA7B;AAAA;AAAA;AAAA;AAAA,iBAAuC;AAAA,UACvC,oDAAC,OAAG,4BAAkB,KAAK,UAAU,KAArC;AAAA;AAAA;AAAA;AAAA,iBAAuC;AAAA,aAFzC;AAAA;AAAA;AAAA;AAAA,eAGA;AAAA,QACA,oDAAC,SAAI,WAAU,iCACb;AAAA,8DAAC,OAAE,WAAU,iBAAgB,2BAA7B;AAAA;AAAA;AAAA;AAAA,iBAAwC;AAAA,UACxC,oDAAC,OAAG,4BAAkB,KAAK,QAAQ,WAAW,KAA9C;AAAA;AAAA;AAAA;AAAA,iBAAgD;AAAA,aAFlD;AAAA;AAAA;AAAA;AAAA,eAGA;AAAA,WAZF;AAAA;AAAA;AAAA;AAAA,aAaA;AAAA,MACA,oDAAC,SAAI,WAAU,qBACb;AAAA,4DAAC,SAAI,WAAU,iCACb;AAAA,8DAAC,OAAE,WAAU,iBAAgB,yBAA7B;AAAA;AAAA;AAAA;AAAA,iBAAsC;AAAA,UACtC,oDAAC,OAAG,eAAK,MAAT;AAAA;AAAA;AAAA;AAAA,iBAAY;AAAA,aAFd;AAAA;AAAA;AAAA;AAAA,eAGA;AAAA,QACA,oDAAC,SAAI,WAAU,iCACb;AAAA,8DAAC,OAAE,WAAU,iBAAgB,0BAA7B;AAAA;AAAA;AAAA;AAAA,iBAAuC;AAAA,UACvC,oDAAC,OAAG,eAAK,cAAT;AAAA;AAAA;AAAA;AAAA,iBAAoB;AAAA,aAFtB;AAAA;AAAA;AAAA;AAAA,eAGA;AAAA,WARF;AAAA;AAAA;AAAA;AAAA,aASA;AAAA,MAEA,oDAAC,SAAI,WAAU,+DACb;AAAA,4DAAC,QAAK,IAAI,WAAW,KAAK,WAAW,WAAU,mBAC7C,8DAAC,OAAE,WAAU,YAAW,2BAAxB;AAAA;AAAA;AAAA;AAAA,eAAmC,KADrC;AAAA;AAAA;AAAA;AAAA,eAEA;AAAA,QACA,oDAAC,QAAQ,SAAR,EAAgB,WAAU,iBAAgB,QAAQ,aACjD,8DAAC,OAAE,WAAU,YAAW,sBAAxB;AAAA;AAAA;AAAA;AAAA,eAA8B,KADhC;AAAA;AAAA;AAAA;AAAA,eAEA;AAAA,WANF;AAAA;AAAA;AAAA;AAAA,aAOA;AAAA,SAlDF;AAAA;AAAA;AAAA;AAAA,WAmDA,KApDF;AAAA;AAAA;AAAA;AAAA,WAqDA;AAAA,IACA;AAAA,MAAC,QAAQ;AAAA,MAAR;AAAA,QACC,SAAQ;AAAA,QACR,MAAK;AAAA,QACL;AAAA,QACA,WAAW;AAAA,QACX,QAAQ;AAAA;AAAA,MALV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAMA;AAAA,OA1EF;AAAA;AAAA;AAAA;AAAA,SA2EA;AAEJ;",
  "names": ["import_jsx_dev_runtime", "import_jsx_dev_runtime"]
}
